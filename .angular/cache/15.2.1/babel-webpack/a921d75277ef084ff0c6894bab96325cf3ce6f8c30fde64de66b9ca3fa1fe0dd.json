{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { takeUntil, switchMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../core/services/data.service\";\nimport * as i3 from \"./../core/services/meta-data.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"./audio-player/audio-player.component\";\nfunction ReleaseComponent_div_0_p_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const description_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", description_r9.paragraph, \" \");\n  }\n}\nfunction ReleaseComponent_div_0_p_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Compiled by \", ctx_r2.release.compiledBy, \"\");\n  }\n}\nfunction ReleaseComponent_div_0_p_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"W&P by \", ctx_r3.release.cdAuthor, \"\");\n  }\n}\nfunction ReleaseComponent_div_0_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵelement(1, \"div\", 22);\n    i0.ɵɵelementStart(2, \"p\", 23);\n    i0.ɵɵtext(3, \"CD purchase:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"a\", 24);\n    i0.ɵɵtext(5, \"Beatspace\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r4.release.beatspaceLink, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction ReleaseComponent_div_0_div_22_a_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 24);\n    i0.ɵɵtext(1, \"Bandcamp 24 bit\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(3);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r10.release.bandcamp24Link, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction ReleaseComponent_div_0_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"p\", 23);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 24);\n    i0.ɵɵtext(4, \"Bandcamp\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, ReleaseComponent_div_0_div_22_a_5_Template, 2, 1, \"a\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r5.release.isFree ? \"Free download:\" : \"Digital purchase:\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r5.release.bandcampLink, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.release.bandcamp24Link);\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/artists\", a1];\n};\nconst _c1 = function (a0) {\n  return {\n    backgroundImage: a0\n  };\n};\nfunction ReleaseComponent_div_0_div_23_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"a\", 30)(2, \"div\", 31);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const artist_r12 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, artist_r12.artistRoute))(\"ngStyle\", i0.ɵɵpureFunction1(5, _c1, \"url(/assets/images/artists/m_\" + artist_r12.artistAvatar + \")\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(artist_r12.artistName);\n  }\n}\nfunction ReleaseComponent_div_0_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"p\", 27);\n    i0.ɵɵtext(2, \"Involved musicians:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ReleaseComponent_div_0_div_23_div_3_Template, 4, 7, \"div\", 28);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.involved);\n  }\n}\nfunction ReleaseComponent_div_0_app_audio_player_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-audio-player\", 32);\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"embedAudio\", ctx_r7.release.embedAudio);\n  }\n}\nfunction ReleaseComponent_div_0_app_shared_video_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-shared-video\", 33);\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"embedVideo\", ctx_r8.release.embedVideo);\n  }\n}\nfunction ReleaseComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"h1\", 3);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 4)(5, \"a\", 5);\n    i0.ɵɵlistener(\"click\", function ReleaseComponent_div_0_Template_a_click_5_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.shareOnFacebook());\n    });\n    i0.ɵɵelement(6, \"span\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 7);\n    i0.ɵɵelement(8, \"app-picture\", 8);\n    i0.ɵɵelementStart(9, \"div\", 9);\n    i0.ɵɵtemplate(10, ReleaseComponent_div_0_p_10_Template, 2, 1, \"p\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 11);\n    i0.ɵɵtemplate(12, ReleaseComponent_div_0_p_12_Template, 2, 1, \"p\", 12);\n    i0.ɵɵtemplate(13, ReleaseComponent_div_0_p_13_Template, 2, 1, \"p\", 12);\n    i0.ɵɵelementStart(14, \"p\", 13);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"p\", 13);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\", 13);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 11);\n    i0.ɵɵtemplate(21, ReleaseComponent_div_0_div_21_Template, 6, 1, \"div\", 14);\n    i0.ɵɵtemplate(22, ReleaseComponent_div_0_div_22_Template, 6, 3, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(23, ReleaseComponent_div_0_div_23_Template, 4, 1, \"div\", 15);\n    i0.ɵɵelementStart(24, \"a\", 16);\n    i0.ɵɵelement(25, \"i\", 17);\n    i0.ɵɵtext(26, \"Go to Releases page \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"div\", 4);\n    i0.ɵɵtemplate(28, ReleaseComponent_div_0_app_audio_player_28_Template, 1, 1, \"app-audio-player\", 18);\n    i0.ɵɵtemplate(29, ReleaseComponent_div_0_app_shared_video_29_Template, 1, 1, \"app-shared-video\", 19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.release.releaseTitle);\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassMap(\"release-cover\");\n    i0.ɵɵproperty(\"cover\", ctx_r0.release.releaseCover)(\"imageFolder\", \"release-cover/\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.release.releaseDescription);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.release.compiledBy);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.release.cdAuthor);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Mastered by \", ctx_r0.release.masteredBy, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Cover design by \", ctx_r0.release.artworkBy, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Release date: \", ctx_r0.release.releaseDate, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.release.beatspaceLink);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.release.bandcampLink);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.release.artists);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.release.embedAudio);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.release.embedVideo);\n  }\n}\nexport class ReleaseComponent {\n  constructor(route, dataService, metaData) {\n    this.route = route;\n    this.dataService = dataService;\n    this.metaData = metaData;\n    this.involved = [];\n    this.releases$ = this.dataService.requestToData('releases');\n    this.artists$ = this.dataService.requestToData('artists');\n    this.releaseRoute = this.route.snapshot.params['releaseRoute'];\n    this.destroyStream = new Subject();\n  }\n  ngOnInit() {\n    this.releases$.pipe(switchMap(releases => {\n      this.release = releases.find(release => release['releaseRoute'] === this.releaseRoute);\n      return this.artists$;\n    }), takeUntil(this.destroyStream)).subscribe(artists => {\n      this.involved = this.getInvolvedArtists(artists, this.release.artists);\n      let releaseDesc = '';\n      for (let i = 0; i < this.release.releaseDescription.length; i++) {\n        releaseDesc += this.release.releaseDescription[i].paragraph;\n      }\n      this.metaDataObj = {\n        title: `${this.release.releaseTitle} | Moon Koradji Records`,\n        description: releaseDesc,\n        ogTitle: this.release.releaseTitle,\n        ogImage: 'https://www.moonkoradji.com/assets/images/release-cover/' + this.release.releaseCover.default,\n        ogUrl: 'https://www.moonkoradji.com/releases/' + this.release.releaseRoute,\n        ogDescription: releaseDesc\n      };\n      this.metaData.setMetaData(this.metaDataObj);\n    });\n  }\n  ngOnDestroy() {\n    this.destroyStream.next();\n  }\n  getInvolvedArtists(allArtists, releaseArtists) {\n    let involved = [];\n    releaseArtists.forEach(name => {\n      const artist = allArtists.find(artist => artist.artistName === name);\n      involved.push(artist);\n    });\n    return involved;\n  }\n  shareOnFacebook() {\n    window.open('https://www.facebook.com/sharer.php?u=' + encodeURIComponent('https://www.moonkoradji.com/releases/' + this.release.releaseRoute), '_blank');\n  }\n  static #_ = this.ɵfac = function ReleaseComponent_Factory(t) {\n    return new (t || ReleaseComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.DataService), i0.ɵɵdirectiveInject(i3.MetaDataService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ReleaseComponent,\n    selectors: [[\"app-release\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"row\", 4, \"ngIf\"], [1, \"row\"], [1, \"heading\"], [1, \"heading__title\"], [1, \"col-md-6\", \"col-sm-12\"], [\"href\", \"javascript: void(0)\", \"title\", \"Share on Facebook\", 1, \"btn\", \"btn-link\", 2, \"position\", \"absolute\", 3, \"click\"], [1, \"fas\", \"fa-share\", \"fa-2x\"], [1, \"release-main\"], [3, \"cover\", \"imageFolder\"], [1, \"release-description\"], [\"class\", \"release-description__paragraph\", 4, \"ngFor\", \"ngForOf\"], [1, \"release-credits\"], [\"class\", \"release-credits__paragraph dark-color\", 4, \"ngIf\"], [1, \"release-credits__paragraph\", \"dark-color\"], [\"class\", \"release-credits__side\", 4, \"ngIf\"], [\"class\", \"s-involved-artists\", 4, \"ngIf\"], [\"routerLink\", \"/releases\", 1, \"s-go-back\"], [1, \"fas\", \"fa-long-arrow-alt-left\"], [3, \"embedAudio\", 4, \"ngIf\"], [3, \"embedVideo\", 4, \"ngIf\"], [1, \"release-description__paragraph\"], [1, \"release-credits__side\"], [1, \"release-credits__icon\"], [1, \"release-credits__paragraph\"], [\"target\", \"_blank\", 1, \"release-link\", 3, \"href\"], [\"target\", \"_blank\", \"class\", \"release-link\", 3, \"href\", 4, \"ngIf\"], [1, \"s-involved-artists\"], [1, \"s-involved-artists__title\"], [\"class\", \"s-involved-artists__item\", 4, \"ngFor\", \"ngForOf\"], [1, \"s-involved-artists__item\"], [1, \"s-involved-artists__content\", 3, \"routerLink\", \"ngStyle\"], [1, \"s-involved-artists__name\"], [3, \"embedAudio\"], [3, \"embedVideo\"]],\n    template: function ReleaseComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ReleaseComponent_div_0_Template, 30, 16, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.release);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i4.NgStyle, i1.RouterLink, i5.AudioPlayerComponent],\n    styles: [\"[_ngcontent-%COMP%]:root{--themeColor: rgb(121, 157, 2);--themeColor--rgb: 121, 157, 2;--themeColorAlt: #24172e;--themeColorAlt--rgb: 36, 23, 46;--darkGrey: #1a1a1a;--grey: #7e7e7e;--lightGrey: $lightGrey;--lightGrey--rgb: 204, 204, 204;--lightGreyAlt: #f1f1f1;--white: white}@keyframes _ngcontent-%COMP%_fade-out{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_grow{0%{transform:rotateX(90deg)}to{transform:rotateX(0)}}@keyframes _ngcontent-%COMP%_coming{0%{transform:translate3D(-50%,-100%,0)}to{transform:translate3D(-50%,35%,0)}}@keyframes _ngcontent-%COMP%_growing{0%{opacity:0;transform:scale3d(0,0,0)}to{opacity:1;transform:scaleZ(1)}}@keyframes _ngcontent-%COMP%_arrow{0%{transform:translate(15px)}to{transform:translate(25px)}}.release-name[_ngcontent-%COMP%]{margin-bottom:15px;font-size:26px;font-weight:300}.release-main[_ngcontent-%COMP%]{margin-bottom:30px}  .release-cover{margin:0 1rem .75rem 0;box-shadow:0 0 1px #fff,-1px -1px 1px #9ff,1px -1px 1px #9c9,-1px 1px 1px #6cf,1px 1px 1px #66f}@supports ((-webkit-margin-end: 0) or (margin-inline-end: 0)){  .release-cover{margin-right:0;-webkit-margin-end:1rem;margin-inline-end:1rem}}@supports ((-webkit-margin-after: 0) or (margin-block-end: 0)){  .release-cover{margin-bottom:0;-webkit-margin-after:.75rem;margin-block-end:.75rem}}.release-credits[_ngcontent-%COMP%]{clear:both;display:flex;flex-wrap:wrap;justify-content:space-between;margin-bottom:20px}.release-credits__paragraph[_ngcontent-%COMP%]{margin-bottom:6px;flex:1 1 100%;line-height:normal}.release-credits__paragraph.dark-color[_ngcontent-%COMP%]{color:#bbb}.release-credits__side[_ngcontent-%COMP%]{flex-grow:1}.release-credits__side[_ngcontent-%COMP%]:not(:first-of-type){text-align:right;text-align:end;display:flex;flex-direction:column;flex-grow:0}.release-credits__icon[_ngcontent-%COMP%]{background:url(/assets/images/long-play-record-cover.svg) no-repeat center;width:40px;height:40px;float:left;float:inline-start;margin-right:.75rem}@supports ((-webkit-margin-end: 0) or (margin-inline-end: 0)){.release-credits__icon[_ngcontent-%COMP%]{margin-right:0;-webkit-margin-end:.75rem;margin-inline-end:.75rem}}.release-credits[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-bottom:10px;text-shadow:1px 1px 2px black;padding:5px 10px;border:1px solid;border-radius:3px;align-self:flex-end;background-color:#ffffff40;line-height:normal}@media (max-width: 767px){.release-credits[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px}}.release-description__paragraph[_ngcontent-%COMP%]{color:#ddd}.s-involved-artists[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;padding-top:1rem;margin-bottom:2rem}.s-involved-artists__title[_ngcontent-%COMP%]{width:100%;margin-bottom:10px;color:#bbb}.s-involved-artists__item[_ngcontent-%COMP%]{flex:0 0 110px;position:relative;aspect-ratio:1}.s-involved-artists__content[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:url(/assets/images/mk_square.jpg);background-size:115%;background-position:center;display:flex;justify-content:end;align-items:flex-end;border-radius:50% 0;overflow:hidden;box-shadow:0 0 1px #fff,-1px -1px 1px #9ff,1px -1px 1px #9c9,-1px 1px 1px #6cf,1px 1px 1px #66f;transition:.3s}.s-involved-artists__name[_ngcontent-%COMP%]{font-size:12px;width:100%;background:linear-gradient(to bottom,transparent 0,rgba(0,0,0,.75) 100%);padding:10px 30px 10px 10px}\"]\n  });\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}